{"version":3,"sources":["formatters.js","AddSymbolForm.js","PortfolioActions.js","PortfolioNav.js","PortfolioContainer.js","Transactions.js"],"names":["bigNumberFormatter","window","Intl","NumberFormat","undefined","maximumFractionDigits","POWER_SUFFIXES","abbreviatedNumberFormatter","format","num","fixed","b","toPrecision","split","k","length","Math","floor","min","parseInt","slice","c","abs","toFixed","pow","currencyFormatter","minimumFractionDigits","numberFormatter","percentFormatter","style","AddSymbolForm","props","React","showTransactionData","setShowTransactionData","formEl","className","action","method","onSubmit","event","preventDefault","formData","formSerialize","currentTarget","hash","onAddSymbol","current","reset","innerRef","for","autoComplete","bsSize","id","name","required","color","onClick","size","type","isOpen","disabled","step","marginBottom","isLoading","PortfolioActions","accept","hidden","onChange","files","onImportPortfolio","value","onDeletePortfolio","onDownloadPortfolio","PortfolioNav","role","exact","to","Portfolio","children","deleteDisabled","onDelete","dispatch","useDispatch","useSelector","state","isFetchingCount","fluid","outline","confirm","deletePortfolio","downloadPortfolio","file","importTransactionsFile","md","data","transaction","cashValue","commission","parseFloat","date","notes","price","shares","symbol","toUpperCase","addTransaction","fetchAllQuotes","SelectReactTable","selectTableHOC","ReactTable","TABLE_COLUMNS","accessor","Cell","Header","headerClassName","Transactions","handleDeleteSelectedTransactions","transactionsToDelete","transactions","filter","selectedTransactionIds","has","deleteTransactions","handlePageSizeChange","nextPageSize","changePageSize","handleToggleAllTransactionIds","isSelected","isAllTransactionIdsSelected","setState","Set","map","handleToggleTransactionIdSelected","transactionId","normalizedTransactionId","replace","isTransactionIdSelected","delete","add","forceUpdate","nextProps","prevState","hasChanges","nextTransactionIds","nextSelectedTransactionIds","tableData","this","quote","quotes","companyName","columns","defaultSorted","desc","getPaginationProps","NextComponent","PreviousComponent","showPageJump","keyField","noDataText","onPageSizeChange","pageSize","appSettings","selectAll","selectType","toggleAll","toggleSelection","connect"],"mappings":"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","file":"static/js/7.d10c8330.chunk.js","sourcesContent":["/* @flow */\n\nconst bigNumberFormatter = new window.Intl.NumberFormat(undefined, { maximumFractionDigits: 2 });\nconst POWER_SUFFIXES = [\"\", \"K\", \"M\", \"B\", \"T\"];\nexport const abbreviatedNumberFormatter = {\n  format(num: number, fixed?: number): string {\n    if (num === null || num === 0) return \"0\"; // terminate early\n\n    fixed = !fixed || fixed < 0 ? 0 : fixed; // number of decimal places to show\n    const b = num.toPrecision(2).split(\"e\"); // get power\n    const k = b.length === 1 ? 0 : Math.floor(Math.min(parseInt(b[1].slice(1), 10), 14) / 3); // floor at decimals, ceiling at trillions\n    const d = k < 0 ? k : Math.abs(k); // enforce -0 is 0\n    const c = d < 1 ? num.toFixed(0 + fixed) : (num / Math.pow(10, k * 3)).toFixed(1 + fixed); // divide by power\n    return `${bigNumberFormatter.format(c)}${POWER_SUFFIXES[k]}`; // append power\n  },\n};\n\n// Don't use style `currency` because it always prints a currency symbol. Match Google Finance\n// exactly (until supporting other currencies) and don't print the symbol.\nexport const currencyFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 2,\n});\n\nexport const numberFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 3,\n  minimumFractionDigits: 3,\n});\n\nexport const percentFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 2,\n  style: \"percent\",\n});\n","/* @flow */\n\nimport * as React from \"react\";\nimport { Button, Collapse, Form, FormGroup, Input, Label } from \"reactstrap\";\nimport formSerialize from \"form-serialize\";\n\ntype Props = {\n  isLoading: boolean,\n  onAddSymbol?: (formData: Object) => void,\n};\n\nexport default function AddSymbolForm(props: Props): React.Node {\n  const [showTransactionData, setShowTransactionData] = React.useState(false);\n  const formEl = React.useRef(null);\n\n  function handleSubmit(event: SyntheticEvent<HTMLFormElement>) {\n    event.preventDefault();\n    const formData = formSerialize(event.currentTarget, { hash: true });\n    if (props.onAddSymbol) props.onAddSymbol(formData);\n    if (formEl.current != null) formEl.current.reset();\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-body\">\n        <Form action=\"/api\" method=\"post\" onSubmit={handleSubmit} innerRef={formEl}>\n          <FormGroup>\n            <Label for=\"symbol\">Symbol</Label>\n            <Input autoComplete=\"off\" bsSize=\"sm\" id=\"symbol\" name=\"symbol\" required />\n          </FormGroup>\n          {showTransactionData ? (\n            <FormGroup>\n              <Button\n                color=\"link\"\n                onClick={() => {\n                  setShowTransactionData(false);\n                }}\n                size=\"sm\"\n                type=\"button\"\n              >\n                - Remove transaction data\n              </Button>\n            </FormGroup>\n          ) : (\n            <FormGroup>\n              <Button\n                color=\"link\"\n                onClick={() => {\n                  setShowTransactionData(true);\n                }}\n                size=\"sm\"\n                type=\"button\"\n              >\n                + Add transaction data\n              </Button>\n            </FormGroup>\n          )}\n          <Collapse isOpen={showTransactionData}>\n            <FormGroup>\n              <Label for=\"type\">Type</Label>\n              <Input\n                bsSize=\"sm\"\n                className=\"form-control\"\n                disabled={!showTransactionData}\n                id=\"type\"\n                name=\"type\"\n                required\n                type=\"select\"\n              >\n                <option>Buy</option>\n                <option>Sell</option>\n              </Input>\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"shares\">Shares</Label>\n              <Input\n                bsSize=\"sm\"\n                disabled={!showTransactionData}\n                id=\"shares\"\n                min=\"0\"\n                name=\"shares\"\n                required\n                step=\".001\"\n                type=\"number\"\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"price\">Price/Amount</Label>\n              <Input\n                bsSize=\"sm\"\n                disabled={!showTransactionData}\n                id=\"price\"\n                min=\"0\"\n                name=\"price\"\n                step=\".01\"\n                type=\"number\"\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"date\">\n                Date <small className=\"text-secondary\">(Optional)</small>\n              </Label>\n              <Input\n                bsSize=\"sm\"\n                disabled={!showTransactionData}\n                id=\"date\"\n                name=\"date\"\n                type=\"date\"\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"commission\">\n                Commission <small className=\"text-secondary\">(Optional)</small>\n              </Label>\n              <Input\n                bsSize=\"sm\"\n                disabled={!showTransactionData}\n                id=\"commission\"\n                min=\"0\"\n                name=\"commission\"\n                step=\".01\"\n                type=\"number\"\n              />\n            </FormGroup>\n          </Collapse>\n          <FormGroup style={{ marginBottom: 0 }}>\n            <Button color=\"primary\" disabled={props.isLoading} size=\"sm\" type=\"submit\">\n              Add to portfolio\n            </Button>\n          </FormGroup>\n        </Form>\n      </div>\n    </div>\n  );\n}\n","/* @flow */\n\nimport * as React from \"react\";\nimport { Button, Col, Input, Label } from \"reactstrap\";\n\ntype Props = {\n  onDeletePortfolio: () => void,\n  onDownloadPortfolio: () => void,\n  onImportPortfolio: (file: Blob) => void,\n};\n\nexport default function PortfolioActions(props: Props): React.Node {\n  const handleImportTransactions = (event: SyntheticEvent<HTMLInputElement>) => {\n    const currentTarget = event.currentTarget;\n    const files = currentTarget.files;\n    if (files == null || files.length === 0) return;\n    props.onImportPortfolio(files[0]);\n\n    // Reset the input so the same file can be uploaded multiple times in a row (without\n    // resetting the `onchange` would not fire). Why upload multiple times? Testing testing\n    // testing. ABT: Always Be Testing.\n    currentTarget.value = \"\";\n  };\n\n  return (\n    <Col className=\"text-right\">\n      <Button color=\"link\" size=\"sm\" type=\"button\">\n        <Label className=\"label-button\">\n          <Input accept=\"text/csv\" hidden onChange={handleImportTransactions} type=\"file\" />\n          Import transactions\n        </Label>\n      </Button>\n      |\n      <Button color=\"link\" onClick={props.onDeletePortfolio} size=\"sm\" type=\"button\">\n        Delete portfolio\n      </Button>\n      |\n      <Button color=\"link\" onClick={props.onDownloadPortfolio} size=\"sm\" type=\"button\">\n        Download to spreadsheet\n      </Button>\n    </Col>\n  );\n}\n","/* @flow */\n\nimport \"./PortfolioNav.css\";\nimport * as React from \"react\";\nimport { Nav, NavItem } from \"reactstrap\";\nimport { NavLink } from \"react-router-dom\";\n\nexport default function PortfolioNav(): React.Node {\n  return (\n    <div className=\"bg-light shadow-sm nav-scroller\">\n      <Nav className=\"nav-portfolio\" role=\"navigation\">\n        <NavItem>\n          <NavLink className=\"nav-link\" exact to=\"/\">\n            Overview\n          </NavLink>\n        </NavItem>\n        <NavItem>\n          <NavLink className=\"nav-link\" to=\"/performance\">\n            Performance\n          </NavLink>\n        </NavItem>\n        <NavItem>\n          <NavLink className=\"nav-link\" to=\"/transactions\">\n            Transactions\n          </NavLink>\n        </NavItem>\n      </Nav>\n    </div>\n  );\n}\n","/* @flow */\n\nimport * as React from \"react\";\nimport type { AppState, Dispatch } from \"./types\";\nimport { Button, Col, Container, Row } from \"reactstrap\";\nimport {\n  addTransaction,\n  deletePortfolio,\n  downloadPortfolio,\n  fetchAllQuotes,\n  importTransactionsFile,\n} from \"./actions\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AddSymbolForm from \"./AddSymbolForm\";\nimport PortfolioActions from \"./PortfolioActions\";\nimport PortfolioNav from \"./PortfolioNav\";\n\ntype Props = {\n  children?: React.Node,\n  deleteDisabled: boolean,\n  onDelete: () => void,\n};\n\nexport default function Portfolio({ children, deleteDisabled, onDelete }: Props): React.Node {\n  const dispatch = useDispatch<Dispatch>();\n  const isLoading = useSelector<AppState, boolean>(state => state.isFetchingCount > 0);\n\n  function handleAddSymbol(data: {\n    commission: string,\n    date: string,\n    price: string,\n    shares: string,\n    symbol: string,\n    type: \"Buy\" | \"Sell\",\n  }) {\n    // Set some defaults and override the symbol to make sure it's always UPPERCASE.\n    const transaction = {\n      cashValue: null,\n      commission: parseFloat(data.commission) || 0,\n      date: data.date,\n      id: -1, // A real ID is added in the reducer.\n      notes: null,\n      price: parseFloat(data.price) || 0,\n      shares: parseFloat(data.shares) || 0,\n      symbol: data.symbol.toUpperCase(),\n      type: data.type || \"Buy\", // Match the behavior of Google Finance; 0 value is a 'Buy'.\n    };\n\n    dispatch(addTransaction(transaction));\n    dispatch(fetchAllQuotes());\n  };\n\n  function handleDeletePortfolio() {\n    if (\n      window.confirm(\"Are you sure you want to delete the entire portfolio? This is irreversible.\")\n    ) {\n      dispatch(deletePortfolio());\n    }\n  };\n\n  function handleDownloadPortfolio() {\n    dispatch(downloadPortfolio());\n  };\n\n  function handleImportPortfolio(file: Blob) {\n    dispatch(importTransactionsFile(file));\n  };\n\n  return (\n    <>\n      <PortfolioNav />\n      <Container fluid>\n        <Row className=\"mb-3 mt-3\">\n          <Col>\n            <Button\n              color={deleteDisabled ? \"secondary\" : \"danger\"}\n              disabled={deleteDisabled}\n              onClick={onDelete}\n              outline\n              size=\"sm\"\n            >\n              Delete\n            </Button>\n          </Col>\n          <PortfolioActions\n            onDeletePortfolio={handleDeletePortfolio}\n            onDownloadPortfolio={handleDownloadPortfolio}\n            onImportPortfolio={handleImportPortfolio}\n          />\n        </Row>\n        {children}\n      </Container>\n      <Container className=\"mb-4\">\n        <Row>\n          <Col md=\"6\">\n            <AddSymbolForm isLoading={isLoading} onAddSymbol={handleAddSymbol} />\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n}\n","/* @flow */\n\nimport * as React from \"react\";\nimport { Button, Col, Row } from \"reactstrap\";\nimport type { AppSettings, AppState, Dispatch, Quote, Transaction } from \"./types\";\nimport { changePageSize, deleteTransactions } from \"./actions\";\nimport { currencyFormatter, numberFormatter } from \"./formatters\";\nimport { Link } from \"react-router-dom\";\nimport PortfolioContainer from \"./PortfolioContainer\";\nimport ReactTable from \"react-table\";\nimport { connect } from \"react-redux\";\nimport selectTableHOC from \"react-table/lib/hoc/selectTable\";\n\ntype StateProps = {\n  appSettings: AppSettings,\n  dispatch: Dispatch,\n  quotes: { [symbol: string]: Quote },\n  transactions: Array<Transaction>,\n};\n\ntype Props = StateProps;\n\ntype State = {\n  selectedTransactionIds: Set<number>,\n};\n\nconst SelectReactTable = selectTableHOC(ReactTable);\n\nconst TABLE_COLUMNS = [\n  {\n    accessor: \"companyName\",\n    Cell: (props) => (props.value == null ? \"...\" : props.value),\n    Header: \"Name\",\n    headerClassName: \"text-left\",\n  },\n  {\n    accessor: \"symbol\",\n    Cell: (props) => <Link to={`/stocks/${props.value}`}>{props.value}</Link>,\n    Header: \"Symbol\",\n    headerClassName: \"text-left\",\n  },\n  { accessor: \"type\", Header: \"Type\", headerClassName: \"text-left\" },\n  {\n    accessor: \"date\",\n    Cell: (props) => <time>{props.value}</time>,\n    Header: \"Date\",\n    headerClassName: \"text-left\",\n  },\n  {\n    accessor: \"shares\",\n    Cell: (props) => (\n      <div className=\"text-right\">\n        {props.value == null ? \"...\" : numberFormatter.format(props.value)}\n      </div>\n    ),\n    Header: \"Shares\",\n    headerClassName: \"text-right\",\n  },\n  {\n    accessor: \"price\",\n    Cell: (props) => (\n      <div className=\"text-right\">\n        {props.value == null ? \"...\" : currencyFormatter.format(props.value)}\n      </div>\n    ),\n    Header: \"Price\",\n    headerClassName: \"text-right\",\n  },\n  {\n    accessor: \"commission\",\n    Cell: (props) => (\n      <div className=\"text-right\">\n        {props.value == null ? \"...\" : currencyFormatter.format(props.value)}\n      </div>\n    ),\n    Header: \"Commission\",\n    headerClassName: \"text-right\",\n  },\n];\n\nclass Transactions extends React.Component<Props, State> {\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n    // If any currently selected transactions are not in the next props update, remove them from the\n    // internal selected transactions `Set` to stay up-to-date.\n    let hasChanges = false;\n    const nextTransactionIds = new Set(nextProps.transactions.map((transaction) => transaction.id));\n    const nextSelectedTransactionIds = new Set<number>();\n    for (const transactionId of prevState.selectedTransactionIds) {\n      if (nextTransactionIds.has(transactionId)) nextSelectedTransactionIds.add(transactionId);\n      else hasChanges = true;\n    }\n\n    if (hasChanges) return { selectedTransactionIds: nextSelectedTransactionIds };\n    else return null;\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      // This is *not* treated as immutable. Object identity will not always correctly indicate\n      // when changes are made.\n      selectedTransactionIds: new Set(),\n    };\n  }\n\n  handleDeleteSelectedTransactions = () => {\n    const transactionsToDelete = this.props.transactions.filter((transaction) =>\n      this.state.selectedTransactionIds.has(transaction.id)\n    );\n    this.props.dispatch(deleteTransactions(transactionsToDelete));\n  };\n\n  handlePageSizeChange = (nextPageSize: number) => {\n    this.props.dispatch(changePageSize(nextPageSize));\n  };\n\n  handleToggleAllTransactionIds = (isSelected: boolean) => {\n    if (this.isAllTransactionIdsSelected()) {\n      this.setState({ selectedTransactionIds: new Set() });\n    } else {\n      this.setState({\n        selectedTransactionIds: new Set(\n          this.props.transactions.map((transaction) => transaction.id)\n        ),\n      });\n    }\n  };\n\n  handleToggleTransactionIdSelected = (transactionId: string) => {\n    const normalizedTransactionId = parseInt(transactionId.replace(/^select-/, \"\"), 10);\n    if (this.isTransactionIdSelected(normalizedTransactionId)) {\n      this.state.selectedTransactionIds.delete(normalizedTransactionId);\n    } else {\n      this.state.selectedTransactionIds.add(normalizedTransactionId);\n    }\n    this.forceUpdate();\n  };\n\n  isAllTransactionIdsSelected = () => {\n    return this.state.selectedTransactionIds.size === this.props.transactions.length;\n  };\n\n  isTransactionIdSelected = (transactionId: number) => {\n    return this.state.selectedTransactionIds.has(transactionId);\n  };\n\n  render() {\n    const tableData = this.props.transactions.map((transaction) => {\n      const quote = this.props.quotes[transaction.symbol];\n      return {\n        ...transaction,\n        companyName: quote == null ? null : quote.companyName,\n      };\n    });\n    const deleteDisabled =\n      this.props.transactions.length === 0 || this.state.selectedTransactionIds.size === 0;\n    return (\n      <PortfolioContainer\n        deleteDisabled={deleteDisabled}\n        onDelete={this.handleDeleteSelectedTransactions}\n      >\n        <Row className=\"mb-3\">\n          <Col>\n            <SelectReactTable\n              columns={TABLE_COLUMNS}\n              data={tableData}\n              defaultSorted={[{ desc: false, id: \"symbol\" }]}\n              getPaginationProps={() => ({\n                className: \"pt-2\",\n                NextComponent: (props) => <Button className=\"btn-sm\" outline {...props} />,\n                PreviousComponent: (props) => <Button className=\"btn-sm\" outline {...props} />,\n                showPageJump: false,\n              })}\n              isSelected={this.isTransactionIdSelected}\n              keyField=\"id\"\n              noDataText=\"No transactions yet. Add one using the form below.\"\n              onPageSizeChange={this.handlePageSizeChange}\n              pageSize={this.props.appSettings.pageSize}\n              selectAll={this.isAllTransactionIdsSelected()}\n              selectType=\"checkbox\"\n              toggleAll={this.handleToggleAllTransactionIds}\n              toggleSelection={this.handleToggleTransactionIdSelected}\n            />\n          </Col>\n        </Row>\n      </PortfolioContainer>\n    );\n  }\n}\n\nexport default (connect<Props, {}, _, _, _, _>((state: AppState) => ({\n  appSettings: state.appSettings,\n  quotes: state.quotes,\n  transactions: state.transactions,\n}))(Transactions): React.ComponentType<*>);\n"],"sourceRoot":""}